<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS REALITY - Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { 
            --bg: #000; 
            --card: rgba(10,10,26,0.9);
            --cyan: #00ffff; 
            --pink: #ff00ff; 
            --green: #00ff88; 
            --orange: #ffaa00; 
            --gold: #ffd700;
            --text: #fff;
            --border: rgba(0,255,255,0.3);
        }
        body { font-family: 'Rajdhani', sans-serif; background: var(--bg); color: var(--text); overflow-x: hidden; }
        .quantum-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: radial-gradient(circle at 20% 50%, rgba(0,255,255,0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(255,0,255,0.1) 0%, transparent 50%); }
        
        .container { max-width: 1400px; margin: 0 auto; padding: 2rem; }
        .header { text-align: center; margin-bottom: 3rem; }
        .title { font-family: 'Orbitron', sans-serif; font-size: 3rem; font-weight: 900; background: linear-gradient(135deg, var(--cyan), var(--pink), var(--green)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 0.5rem; }
        .subtitle { color: var(--cyan); font-size: 1.2rem; opacity: 0.9; }
        
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 3rem; }
        .stat-card { background: linear-gradient(135deg, rgba(0,255,255,0.1), rgba(255,0,255,0.1)); border: 2px solid var(--cyan); border-radius: 12px; padding: 1.5rem; transition: all 0.3s; }
        .stat-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px rgba(0,255,255,0.4); }
        .stat-icon { font-size: 2.5rem; margin-bottom: 1rem; }
        .stat-value { font-family: 'Orbitron', sans-serif; font-size: 2.5rem; color: var(--green); font-weight: 900; margin-bottom: 0.5rem; }
        .stat-label { font-size: 0.9rem; opacity: 0.8; }
        .stat-progress { width: 100%; height: 8px; background: rgba(0,0,0,0.3); border-radius: 4px; margin-top: 1rem; overflow: hidden; }
        .stat-progress-bar { height: 100%; background: linear-gradient(90deg, var(--cyan), var(--pink)); transition: width 0.5s; }
        
        .section { background: var(--card); border: 2px solid var(--border); border-radius: 12px; padding: 2rem; margin-bottom: 2rem; }
        .section-title { font-family: 'Orbitron', sans-serif; font-size: 1.8rem; color: var(--cyan); margin-bottom: 1.5rem; border-bottom: 2px solid var(--border); padding-bottom: 0.8rem; }
        
        .chart-container { position: relative; height: 300px; margin-bottom: 2rem; }
        
        .subject-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }
        .subject-card { background: rgba(0,0,0,0.3); border: 2px solid var(--border); border-radius: 10px; padding: 1.5rem; }
        .subject-name { font-size: 1.3rem; color: var(--pink); font-weight: 700; margin-bottom: 1rem; }
        .subject-stats { display: flex; justify-content: space-between; margin-bottom: 0.5rem; }
        
        .recommendation-list { display: grid; gap: 1rem; }
        .recommendation-item { background: rgba(255,0,255,0.1); border: 2px solid var(--pink); border-radius: 8px; padding: 1rem; display: flex; justify-content: space-between; align-items: center; }
        .rec-title { font-weight: 700; color: var(--cyan); }
        .rec-status { padding: 0.3rem 0.8rem; border-radius: 5px; font-size: 0.8rem; font-weight: 700; }
        .status-complete { background: rgba(0,255,136,0.2); color: var(--green); border: 1px solid var(--green); }
        .status-partial { background: rgba(255,170,0,0.2); color: var(--orange); border: 1px solid var(--orange); }
        
        .btn { padding: 0.8rem 1.5rem; border: 2px solid var(--cyan); border-radius: 8px; font-weight: 700; cursor: pointer; background: linear-gradient(135deg, rgba(0,255,255,0.1), rgba(255,0,255,0.1)); color: #fff; transition: all 0.2s; font-size: 0.9rem; font-family: 'Rajdhani', sans-serif; text-decoration: none; display: inline-block; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(0,255,255,0.5); }
        .btn-primary { background: linear-gradient(135deg, var(--cyan), #0099cc); }
        .btn-success { background: linear-gradient(135deg, var(--green), #00cc66); }
        .btn-danger { background: linear-gradient(135deg, #ff3366, #cc0033); }
        
        .timeline { position: relative; padding-left: 2rem; }
        .timeline-item { position: relative; padding-bottom: 2rem; }
        .timeline-item::before { content: ''; position: absolute; left: -2rem; top: 0; width: 2px; height: 100%; background: var(--cyan); }
        .timeline-item::after { content: ''; position: absolute; left: -2.5rem; top: 0; width: 10px; height: 10px; border-radius: 50%; background: var(--pink); border: 2px solid var(--cyan); }
        .timeline-date { color: var(--orange); font-size: 0.9rem; margin-bottom: 0.5rem; }
        .timeline-content { background: rgba(0,0,0,0.3); padding: 1rem; border-radius: 8px; border: 1px solid var(--border); }
        
        @media (max-width: 768px) { 
            .title { font-size: 2rem; }
            .stats-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="quantum-bg"></div>
    
    <div class="container">
        <div class="header">
            <h1 class="title">üìä Performance Dashboard</h1>
            <p class="subtitle">Track Your Progress ‚Ä¢ Analyze Performance ‚Ä¢ Achieve Excellence</p>
        </div>
        
        <!-- Main Stats -->
        <div class="stats-grid" id="mainStats">
            <div class="stat-card">
                <div class="stat-icon">üìö</div>
                <div class="stat-value" id="chaptersCompleted">0</div>
                <div class="stat-label">Chapters Completed</div>
                <div class="stat-progress">
                    <div class="stat-progress-bar" id="chapterProgress" style="width: 0%"></div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-value" id="problemsSolved">0</div>
                <div class="stat-label">Problems Solved</div>
                <div class="stat-progress">
                    <div class="stat-progress-bar" id="problemProgress" style="width: 0%"></div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">üìù</div>
                <div class="stat-value" id="testsAttempted">0</div>
                <div class="stat-label">Tests Attempted</div>
                <div class="stat-progress">
                    <div class="stat-progress-bar" id="testProgress" style="width: 0%"></div>
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">‚è±Ô∏è</div>
                <div class="stat-value" id="studyHours">0</div>
                <div class="stat-label">Study Hours</div>
                <div class="stat-progress">
                    <div class="stat-progress-bar" id="timeProgress" style="width: 0%"></div>
                </div>
            </div>
        </div>
        
        <!-- Subject-wise Performance -->
        <div class="section">
            <h2 class="section-title">üìä Subject-wise Performance</h2>
            <div class="subject-grid" id="subjectPerformance"></div>
        </div>
        
        <!-- Progress Chart -->
        <div class="section">
            <h2 class="section-title">üìà Progress Over Time</h2>
            <div class="chart-container">
                <canvas id="progressChart"></canvas>
            </div>
        </div>
        
        <!-- Recommendations -->
        <div class="section">
            <h2 class="section-title">üí° Recommended Chapters</h2>
            <div class="recommendation-list" id="recommendations"></div>
        </div>
        
        <!-- Recent Activity -->
        <div class="section">
            <h2 class="section-title">üïê Recent Activity</h2>
            <div class="timeline" id="recentActivity"></div>
        </div>
        
        <!-- Actions -->
        <div style="text-align: center; margin-top: 3rem;">
            <a href="app.html" class="btn btn-primary" style="margin: 0.5rem;">üìö Browse Chapters</a>
            <a href="test.html" class="btn btn-success" style="margin: 0.5rem;">üìù Take Test</a>
            <a href="olympiad-papers.html" class="btn" style="margin: 0.5rem;">üèÜ Olympiad Papers</a>
            <button class="btn btn-danger" onclick="resetProgress()" style="margin: 0.5rem;">‚Üª Reset Progress</button>
        </div>
    </div>
    
    <script src="master-integration.js"></script>
    <script>
        // Initialize dashboard
        function initDashboard() {
            if (!window.NEXUS) {
                console.error('NEXUS not loaded!');
                return;
            }
            
            updateMainStats();
            updateSubjectPerformance();
            updateProgressChart();
            updateRecommendations();
            updateRecentActivity();
        }
        
        // Update main statistics
        function updateMainStats() {
            const stats = window.NEXUS.progress.getStats();
            
            document.getElementById('chaptersCompleted').textContent = stats.chaptersCompleted;
            document.getElementById('chapterProgress').style.width = stats.chapterProgress + '%';
            
            document.getElementById('problemsSolved').textContent = stats.problemsSolved;
            document.getElementById('problemProgress').style.width = stats.problemProgress + '%';
            
            document.getElementById('testsAttempted').textContent = stats.testsAttempted;
            document.getElementById('testProgress').style.width = Math.min(stats.testsAttempted * 10, 100) + '%';
            
            document.getElementById('studyHours').textContent = stats.studyHours;
            document.getElementById('timeProgress').style.width = Math.min(stats.studyHours * 2, 100) + '%';
        }
        
        // Update subject-wise performance
        function updateSubjectPerformance() {
            const performance = window.NEXUS.analytics.getSubjectWisePerformance();
            const container = document.getElementById('subjectPerformance');
            
            const subjects = [
                { name: 'Physics', data: performance.physics, icon: '‚öõÔ∏è' },
                { name: 'Chemistry', data: performance.chemistry, icon: 'üß™' },
                { name: 'Mathematics', data: performance.maths, icon: 'üìê' }
            ];
            
            container.innerHTML = subjects.map(subject => `
                <div class="subject-card">
                    <div class="subject-name">${subject.icon} ${subject.name}</div>
                    <div class="subject-stats">
                        <span>Problems Solved:</span>
                        <span style="color: var(--green); font-weight: 700;">${subject.data.solved}/${subject.data.total}</span>
                    </div>
                    <div class="stat-progress">
                        <div class="stat-progress-bar" style="width: ${subject.data.percentage}%"></div>
                    </div>
                    <div style="text-align: center; margin-top: 1rem; font-size: 1.5rem; color: var(--cyan); font-weight: 900;">
                        ${subject.data.percentage}%
                    </div>
                </div>
            `).join('');
        }
        
        // Update progress chart
        function updateProgressChart() {
            const timeline = window.NEXUS.analytics.getProgressOverTime();
            
            const ctx = document.getElementById('progressChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: timeline.map(t => t.date),
                    datasets: [{
                        label: 'Test Score (%)',
                        data: timeline.map(t => t.score),
                        borderColor: '#00ffff',
                        backgroundColor: 'rgba(0, 255, 255, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#fff' }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: { color: '#fff' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        },
                        x: {
                            ticks: { color: '#fff' },
                            grid: { color: 'rgba(255, 255, 255, 0.1)' }
                        }
                    }
                }
            });
        }
        
        // Update recommendations
        function updateRecommendations() {
            const recommended = window.NEXUS.recommendations.getRecommendedChapters(5);
            const container = document.getElementById('recommendations');
            
            if (recommended.length === 0) {
                container.innerHTML = '<p style="text-align: center; opacity: 0.7;">üéâ All chapters completed! Great job!</p>';
                return;
            }
            
            container.innerHTML = recommended.map(ch => `
                <div class="recommendation-item">
                    <div>
                        <div class="rec-title">${ch.title}</div>
                        <div style="font-size: 0.9rem; opacity: 0.7; margin-top: 0.3rem;">
                            ${ch.problems} problems
                        </div>
                    </div>
                    <div>
                        <span class="rec-status ${ch.status === 'complete' ? 'status-complete' : 'status-partial'}">
                            ${ch.status === 'complete' ? 'Complete' : 'Partial'}
                        </span>
                    </div>
                </div>
            `).join('');
        }
        
        // Update recent activity
        function updateRecentActivity() {
            const container = document.getElementById('recentActivity');
            const stats = window.NEXUS.progress.getStats();
            
            const activities = [
                { date: 'Today', content: `Solved ${stats.problemsSolved} problems` },
                { date: 'This Week', content: `Completed ${stats.chaptersCompleted} chapters` },
                { date: 'This Month', content: `Studied for ${stats.studyHours} hours` },
                { date: 'Overall', content: `Attempted ${stats.testsAttempted} tests` }
            ];
            
            container.innerHTML = activities.map(activity => `
                <div class="timeline-item">
                    <div class="timeline-date">${activity.date}</div>
                    <div class="timeline-content">${activity.content}</div>
                </div>
            `).join('');
        }
        
        // Reset progress
        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This cannot be undone!')) {
                window.NEXUS.progress.reset();
                location.reload();
            }
        }
        
        // Initialize on load
        window.addEventListener('load', initDashboard);
        
        console.log('üìä NEXUS REALITY - Dashboard Ready!');
    </script>
</body>
</html>