<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter Viewer - NEXUS REALITY</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { 
            --bg: #000; 
            --card: rgba(10,10,26,0.9);
            --cyan: #00ffff; 
            --pink: #ff00ff; 
            --green: #00ff88; 
            --orange: #ffaa00; 
            --text: #fff;
            --border: rgba(0,255,255,0.3);
        }
        body { font-family: 'Rajdhani', sans-serif; background: var(--bg); color: var(--text); }
        .quantum-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: radial-gradient(circle at 20% 50%, rgba(0,255,255,0.1) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(255,0,255,0.1) 0%, transparent 50%); }
        
        .navbar { background: rgba(0,0,0,0.9); padding: 1rem 2rem; border-bottom: 2px solid var(--cyan); position: sticky; top: 0; z-index: 100; }
        .nav-content { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; }
        .logo { font-family: 'Orbitron', sans-serif; font-size: 1.5rem; color: var(--cyan); font-weight: 900; }
        .back-btn { padding: 0.5rem 1rem; background: rgba(0,255,255,0.1); border: 2px solid var(--cyan); border-radius: 5px; color: var(--text); text-decoration: none; transition: all 0.2s; }
        .back-btn:hover { background: rgba(0,255,255,0.2); }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
        .chapter-header { text-align: center; margin-bottom: 3rem; padding: 2rem; background: linear-gradient(135deg, rgba(0,255,255,0.1), rgba(255,0,255,0.1)); border: 2px solid var(--cyan); border-radius: 12px; }
        .chapter-title { font-family: 'Orbitron', sans-serif; font-size: 2.5rem; font-weight: 900; color: var(--cyan); margin-bottom: 1rem; }
        .chapter-meta { display: flex; gap: 2rem; justify-content: center; flex-wrap: wrap; margin-top: 1rem; }
        .meta-item { display: flex; align-items: center; gap: 0.5rem; }
        
        .tabs { display: flex; gap: 1rem; margin-bottom: 2rem; border-bottom: 2px solid var(--border); flex-wrap: wrap; }
        .tab { padding: 1rem 2rem; cursor: pointer; transition: all 0.3s; font-weight: 700; border-bottom: 3px solid transparent; }
        .tab:hover { color: var(--cyan); }
        .tab.active { color: var(--cyan); border-bottom-color: var(--cyan); }
        
        .content-section { display: none; }
        .content-section.active { display: block; animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        .theory-section { background: rgba(0,255,255,0.05); border: 2px solid var(--border); border-radius: 12px; padding: 2rem; margin-bottom: 2rem; }
        .section-title { color: var(--pink); font-size: 1.8rem; font-weight: 700; margin-bottom: 1rem; }
        .theory-content { line-height: 1.8; font-size: 1.1rem; }
        .theory-content strong { color: var(--cyan); }
        .formula-box { background: rgba(0,0,0,0.5); padding: 1rem; border-left: 4px solid var(--green); margin: 1rem 0; font-family: 'Courier New', monospace; color: var(--green); }
        
        .problems-grid { display: grid; gap: 1.5rem; }
        .problem-card { background: linear-gradient(135deg, rgba(0,255,255,0.1), rgba(255,0,255,0.1)); border: 2px solid var(--cyan); border-radius: 12px; padding: 1.5rem; }
        .problem-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 1rem; }
        .problem-number { color: var(--cyan); font-weight: 700; font-size: 1.2rem; }
        .difficulty-badge { padding: 0.3rem 0.8rem; border-radius: 5px; font-size: 0.9rem; font-weight: 700; }
        .diff-easy { background: rgba(0,255,136,0.2); color: var(--green); border: 1px solid var(--green); }
        .diff-medium { background: rgba(255,170,0,0.2); color: var(--orange); border: 1px solid var(--orange); }
        .diff-hard { background: rgba(255,0,255,0.2); color: var(--pink); border: 1px solid var(--pink); }
        .diff-olympiad { background: rgba(255,215,0,0.2); color: #ffd700; border: 1px solid #ffd700; }
        
        .problem-question { font-size: 1.1rem; margin-bottom: 1rem; line-height: 1.6; }
        .options-list { list-style: none; margin: 1rem 0; }
        .option { padding: 0.8rem; margin: 0.5rem 0; background: rgba(0,0,0,0.3); border-radius: 8px; cursor: pointer; transition: all 0.2s; }
        .option:hover { background: rgba(0,255,255,0.1); border-left: 3px solid var(--cyan); }
        
        .solution-box { background: rgba(0,255,136,0.1); border: 2px solid var(--green); border-radius: 8px; padding: 1.5rem; margin-top: 1rem; display: none; }
        .solution-box.show { display: block; animation: slideDown 0.3s; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        
        .btn { padding: 0.8rem 1.5rem; border: 2px solid var(--cyan); border-radius: 8px; font-weight: 700; cursor: pointer; background: linear-gradient(135deg, rgba(0,255,255,0.1), rgba(255,0,255,0.1)); color: #fff; transition: all 0.2s; font-size: 0.9rem; font-family: 'Rajdhani', sans-serif; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(0,255,255,0.5); }
        
        .loading { text-align: center; padding: 3rem; font-size: 1.5rem; color: var(--cyan); }
        .error { text-align: center; padding: 3rem; color: var(--pink); }
        
        @media (max-width: 768px) { 
            .chapter-title { font-size: 1.8rem; }
            .tabs { justify-content: center; }
        }
    </style>
</head>
<body>
    <div class="quantum-bg"></div>
    
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-content">
            <div class="logo">üéØ NEXUS REALITY</div>
            <a href="app.html" class="back-btn"><i class="fas fa-arrow-left"></i> Back to Chapters</a>
        </div>
    </nav>
    
    <div class="container">
        <!-- Loading State -->
        <div id="loading" class="loading">
            <i class="fas fa-spinner fa-spin"></i> Loading chapter...
        </div>
        
        <!-- Error State -->
        <div id="error" class="error" style="display: none;">
            <i class="fas fa-exclamation-triangle"></i> Chapter not found or failed to load.
            <br><br>
            <a href="app.html" class="btn">‚Üê Back to Chapters</a>
        </div>
        
        <!-- Chapter Content -->
        <div id="chapterContent" style="display: none;">
            <!-- Header -->
            <div class="chapter-header">
                <h1 class="chapter-title" id="chapterTitle"></h1>
                <div class="chapter-meta" id="chapterMeta"></div>
            </div>
            
            <!-- Tabs -->
            <div class="tabs">
                <div class="tab active" onclick="showTab('theory')">üìñ Theory</div>
                <div class="tab" onclick="showTab('problems')">üìù Problems</div>
                <div class="tab" onclick="showTab('formulas')">üìê Formulas</div>
            </div>
            
            <!-- Theory Section -->
            <div id="theory" class="content-section active">
                <div id="theoryContent"></div>
            </div>
            
            <!-- Problems Section -->
            <div id="problems" class="content-section">
                <div id="problemsContent"></div>
            </div>
            
            <!-- Formulas Section -->
            <div id="formulas" class="content-section">
                <div id="formulasContent"></div>
            </div>
        </div>
    </div>
    
    <script src="chapters-complete-physics.js"></script>
    <script src="chapters-complete-physics-2.js"></script>
    <script src="chapters-complete-chemistry.js"></script>
    <script src="chapters-complete-chemistry-2.js"></script>
    <script src="chapters-complete-maths.js"></script>
    <script>
        let currentChapter = null;
        
        // Get chapter ID from URL
        function getChapterId() {
            const params = new URLSearchParams(window.location.search);
            return params.get('id');
        }
        
        // Load chapter data
        function loadChapter() {
            const chapterId = getChapterId();
            
            if (!chapterId) {
                showError();
                return;
            }
            
            // Try to load from different sources
            let chapterData = null;
            
            // Check COMPLETE_PHYSICS
            if (typeof COMPLETE_PHYSICS !== 'undefined' && COMPLETE_PHYSICS[chapterId]) {
                chapterData = COMPLETE_PHYSICS[chapterId];
            }
            // Check COMPLETE_PHYSICS_2
            else if (typeof COMPLETE_PHYSICS_2 !== 'undefined' && COMPLETE_PHYSICS_2[chapterId]) {
                chapterData = COMPLETE_PHYSICS_2[chapterId];
            }
            // Check COMPLETE_CHEMISTRY
            else if (typeof COMPLETE_CHEMISTRY !== 'undefined' && COMPLETE_CHEMISTRY[chapterId]) {
                chapterData = COMPLETE_CHEMISTRY[chapterId];
            }
            // Check COMPLETE_CHEMISTRY_2
            else if (typeof COMPLETE_CHEMISTRY_2 !== 'undefined' && COMPLETE_CHEMISTRY_2[chapterId]) {
                chapterData = COMPLETE_CHEMISTRY_2[chapterId];
            }
            // Check COMPLETE_MATHS
            else if (typeof COMPLETE_MATHS !== 'undefined' && COMPLETE_MATHS[chapterId]) {
                chapterData = COMPLETE_MATHS[chapterId];
            }
            
            if (chapterData) {
                currentChapter = { id: chapterId, ...chapterData };
                displayChapter();
            } else {
                showError();
            }
        }
        
        // Display chapter
        function displayChapter() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('chapterContent').style.display = 'block';
            
            // Set title
            const titleMap = {
                p5: 'Rotational Motion',
                p9: 'Kinetic Theory of Gases',
                p10: 'Oscillations and Waves',
                p12: 'Current Electricity',
                p15: 'Electromagnetic Induction',
                p18: 'Ray Optics',
                c1: 'Atomic Structure',
                c5: 'Thermodynamics',
                c8: 'Equilibrium',
                c10: 'Hydrocarbons',
                c12: 'Aldehydes, Ketones and Carboxylic Acids',
                c16: 'Electrochemistry',
                m1: 'Sets, Relations and Functions',
                m6: 'Matrices and Determinants',
                m13: 'Probability'
            };
            
            document.getElementById('chapterTitle').textContent = titleMap[currentChapter.id] || 'Chapter';
            
            // Set meta
            const problemCount = currentChapter.problems ? currentChapter.problems.length : 0;
            document.getElementById('chapterMeta').innerHTML = `
                <div class="meta-item">
                    <i class="fas fa-book"></i>
                    <span>${problemCount} Problems</span>
                </div>
                <div class="meta-item">
                    <i class="fas fa-clock"></i>
                    <span>~${Math.ceil(problemCount / 10)} hours</span>
                </div>
            `;
            
            // Display theory
            displayTheory();
            
            // Display problems
            displayProblems();
            
            // Display formulas
            displayFormulas();
        }
        
        // Display theory
        function displayTheory() {
            const theoryDiv = document.getElementById('theoryContent');
            
            if (!currentChapter.theory || !currentChapter.theory.sections) {
                theoryDiv.innerHTML = '<div class="theory-section"><p>Theory content coming soon...</p></div>';
                return;
            }
            
            let html = '';
            
            if (currentChapter.theory.introduction) {
                html += `
                    <div class="theory-section">
                        <div class="section-title">Introduction</div>
                        <div class="theory-content">${currentChapter.theory.introduction}</div>
                    </div>
                `;
            }
            
            currentChapter.theory.sections.forEach(section => {
                html += `
                    <div class="theory-section">
                        <div class="section-title">${section.title}</div>
                        <div class="theory-content">${section.content.replace(/\n/g, '<br>')}</div>
                    </div>
                `;
            });
            
            theoryDiv.innerHTML = html;
        }
        
        // Display problems
        function displayProblems() {
            const problemsDiv = document.getElementById('problemsContent');
            
            if (!currentChapter.problems || currentChapter.problems.length === 0) {
                problemsDiv.innerHTML = '<div class="theory-section"><p>Problems coming soon...</p></div>';
                return;
            }
            
            let html = '<div class="problems-grid">';
            
            currentChapter.problems.forEach((problem, index) => {
                const diffClass = {
                    easy: 'diff-easy',
                    medium: 'diff-medium',
                    hard: 'diff-hard',
                    olympiad: 'diff-olympiad'
                }[problem.difficulty] || 'diff-medium';
                
                html += `
                    <div class="problem-card">
                        <div class="problem-header">
                            <div class="problem-number">Problem ${index + 1}</div>
                            <div class="difficulty-badge ${diffClass}">${problem.difficulty.toUpperCase()}</div>
                        </div>
                        <div class="problem-question">${problem.question}</div>
                        ${problem.options ? `
                            <ul class="options-list">
                                ${problem.options.map((opt, i) => `
                                    <li class="option">
                                        <strong>${String.fromCharCode(65 + i)})</strong> ${opt}
                                    </li>
                                `).join('')}
                            </ul>
                        ` : ''}
                        <button class="btn" onclick="toggleSolution(${index})">
                            <i class="fas fa-lightbulb"></i> Show Solution
                        </button>
                        <div class="solution-box" id="solution-${index}">
                            <strong style="color: var(--green); font-size: 1.2rem;">Solution:</strong>
                            <div style="margin-top: 1rem; line-height: 1.8;">
                                ${problem.solution ? problem.solution.replace(/\n/g, '<br>') : 'Solution coming soon...'}
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            problemsDiv.innerHTML = html;
        }
        
        // Display formulas
        function displayFormulas() {
            const formulasDiv = document.getElementById('formulasContent');
            
            if (!currentChapter.theory || !currentChapter.theory.sections) {
                formulasDiv.innerHTML = '<div class="theory-section"><p>Formulas coming soon...</p></div>';
                return;
            }
            
            let html = '<div class="theory-section"><div class="section-title">Important Formulas</div>';
            
            currentChapter.theory.sections.forEach(section => {
                if (section.formulas && section.formulas.length > 0) {
                    html += `<h3 style="color: var(--cyan); margin: 1.5rem 0 1rem;">${section.title}</h3>`;
                    section.formulas.forEach(formula => {
                        html += `
                            <div class="formula-box">
                                <strong>${formula.name}:</strong> ${formula.expr}
                                ${formula.description ? `<br><span style="opacity: 0.8; font-size: 0.9rem;">${formula.description}</span>` : ''}
                                ${formula.unit ? `<br><span style="opacity: 0.8; font-size: 0.9rem;">Unit: ${formula.unit}</span>` : ''}
                            </div>
                        `;
                    });
                }
            });
            
            html += '</div>';
            formulasDiv.innerHTML = html;
        }
        
        // Toggle solution
        function toggleSolution(index) {
            const solution = document.getElementById(`solution-${index}`);
            solution.classList.toggle('show');
        }
        
        // Show tab
        function showTab(tabName) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remove active from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(tabName).classList.add('active');
            
            // Activate clicked tab
            event.target.classList.add('active');
        }
        
        // Show error
        function showError() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error').style.display = 'block';
        }
        
        // Initialize
        window.addEventListener('load', loadChapter);
        
        console.log('üìñ Chapter Viewer - Ready!');
    </script>
</body>
</html>